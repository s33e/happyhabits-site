<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Habit Editor</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: #f5f5f5;
            padding: 12px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .progress {
            background: white;
            padding: 10px 16px;
            border-radius: 8px;
            margin-bottom: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            font-size: 0.95rem;
            color: #333;
            font-weight: 500;
        }
        
        .habit-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-bottom: 12px;
        }
        
        .habit-card img {
            width: 100%;
            max-height: 300px;
            object-fit: cover;
            display: block;
        }
        
        .habit-content {
            padding: 16px;
        }
        
        .textarea-wrapper {
            position: relative;
            margin-bottom: 8px;
        }
        
        textarea {
            width: 100%;
            min-height: 120px;
            max-height: 400px;
            padding: 12px;
            font-size: 1rem;
            line-height: 1.5;
            border: 2px solid #ddd;
            border-radius: 8px;
            resize: vertical;
            font-family: inherit;
            transition: border-color 0.2s;
        }
        
        textarea:focus {
            outline: none;
            border-color: #0066cc;
        }
        
        textarea.changed {
            border-color: #f59e0b;
        }
        
        .char-count {
            text-align: right;
            font-size: 0.85rem;
            color: #666;
            margin-bottom: 12px;
        }
        
        .action-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 12px;
        }
        
        button {
            padding: 12px 20px;
            font-size: 1rem;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            border: none;
            transition: all 0.2s;
        }
        
        button:active {
            transform: scale(0.98);
        }
        
        .btn-save {
            background: #10b981;
            color: white;
        }
        
        .btn-save:hover {
            background: #059669;
        }
        
        .btn-next {
            background: #3b82f6;
            color: white;
        }
        
        .btn-next:hover {
            background: #2563eb;
        }
        
        .utility-buttons {
            display: flex;
            gap: 12px;
            justify-content: center;
        }
        
        .btn-utility {
            background: white;
            color: #0066cc;
            border: 2px solid #0066cc;
            padding: 10px 20px;
            font-size: 0.9rem;
        }
        
        .btn-utility:hover {
            background: #f0f7ff;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="progress">5/559 | Changed: 3 | Reviewed: 200 | Remaining: 356</div>
        
        <div class="habit-card">
            <img src="images/dont-take-no.jpg" alt="Habit">
            <div class="habit-content">
                <div class="textarea-wrapper">
                    <textarea id="habitText" autofocus>ðŸ™‰ Don't take "No" from someone who can't give you a "Yes". Also, every no gets you one step closer to finding a yes. Persistence pays but be smart who you ask. Be persistent in pursuing your goals. If someone can't give you what you want, their "no" shouldn't stop you. Look for other options or solutions instead.</textarea>
                </div>
                <div class="char-count" id="charCount">0 characters</div>
                
                <div class="action-buttons">
                    <button class="btn-save" id="btnSave" onclick="handleSave()">Save</button>
                    <button class="btn-next" id="btnNext" onclick="handleNext()">Next</button>
                </div>
            </div>
        </div>
        
        <div class="utility-buttons">
            <button class="btn-utility" onclick="handleDownload()">Download Changes</button>
            <button class="btn-utility" onclick="handleImport()">Import Progress</button>
        </div>
    </div>

    <script>
        const textarea = document.getElementById('habitText');
        const charCount = document.getElementById('charCount');
        let originalText = textarea.value;
        
        // Auto-resize textarea
        function autoResize() {
            textarea.style.height = 'auto';
            textarea.style.height = Math.min(textarea.scrollHeight, 400) + 'px';
        }
        
        // Update character count
        function updateCharCount() {
            const count = textarea.value.length;
            charCount.textContent = `${count} characters`;
        }
        
        // Track changes
        textarea.addEventListener('input', function() {
            autoResize();
            updateCharCount();
            
            // Visual feedback if changed
            if (textarea.value !== originalText) {
                textarea.classList.add('changed');
            } else {
                textarea.classList.remove('changed');
            }
        });
        
        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            // Cmd/Ctrl + S = Save
            if ((e.metaKey || e.ctrlKey) && e.key === 's') {
                e.preventDefault();
                handleSave();
            }
            // Cmd/Ctrl + Enter = Next
            if ((e.metaKey || e.ctrlKey) && e.key === 'Enter') {
                e.preventDefault();
                handleNext();
            }
        });
        
        // Button handlers
        function handleSave() {
            alert('Save: Text changed, saving & moving to next');
        }
        
        function handleNext() {
            alert('Next: No changes, skipping to next habit');
        }
        
        function handleDownload() {
            alert('Download: Export all changes as JSON');
        }
        
        function handleImport() {
            alert('Import: Upload progress file to resume');
        }
        
        // Initialize
        autoResize();
        updateCharCount();
        textarea.focus();
    </script>
</body>
</html>
